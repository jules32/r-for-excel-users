# Tidying <- possibly "Reshaping & tidying"? 

## Summary

In previous sessions, we learned to read in data, do some wrangling, and create a graph and table. Here, we'll continue by *reshaping* data frames (converting from long-to-wide, or wide-to-long format), *separating* and *uniting* variable (column) contents, converting between *explicit* and *implicit* missing (`NA`) values, and cleaning up our column names with the `janitor` package. 

## Objectives

- Convert column names with `janitor::clean_names()`
- Reshape data frames with `tidyr::pivot_longer()` and `tidyr::pivot_wider()`
- Combine or separate information from columns with `tidyr::separate()` and `tidyr::unite()`
- Make implicit missings *explicit* with `tidyr::complete()`
- Make explicit missings *implicit* with `tidyr::drop_na()`
- Use our new skills as part of a bigger wrangling sequence
- Make a customized table 

## Resources

-- [Ch. 12 *Tidy Data*, in R for Data Science](https://r4ds.had.co.nz/tidy-data.html) by Grolemund & Wickham
- [`tidyr` documentation from tidyverse.org](https://tidyr.tidyverse.org/)
- [`janitor` repo / information](https://github.com/sfirke/janitor) from Sam Firke

## Lesson

### Lesson Prep

#### Create a new R Markdown and attach packages

Within your day 2 R Project, create a new .Rmd. Attach the `tidyverse`, `janitor` and `readxl` packages with `library(package_name)`. Knit and save your new .Rmd within the project folder. 

```{r, include = FALSE}
# Attach packages
library(tidyverse)
library(janitor)
library(readxl)
```

```{r, eval = FALSE}
# Attach packages
library(tidyverse)
library(janitor)
library(readxl)
```

#### Read in data

Use `readxl::read_excel()` to import the "invert_counts_curated.xlsx" data:
```{r, include = FALSE}
inverts_df <- readxl::read_excel(here::here("curation", "invert_counts_curated.xlsx"))
```

```{r, eval = FALSE}
inverts_df <- readxl::read_excel("invert_counts_curated.xlsx")
```

Be sure to explore the imported data a bit: 

- `View()`
- `names()`
- `summary()`

### Reshaping with `tidyr::pivot_longer()` and `tidyr::pivot_wider()`

In *tidy format*, each variable is contained within a single column. If we look at *inverts_df*, we can see that the *year* variable is actually split over 3 columns, so we'd say this is currently in **wide format**. 

There may be times when you want to have data in wide format, but often with code it is more efficient to convert to **long format** by gathering together observations for a variable that is currently split into multiple columns. 

Schematically, converting from wide to long format looks like this: 

![](img/tidyr_pivot_longer.png)