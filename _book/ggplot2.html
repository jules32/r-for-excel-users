<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Graphs with ggplot2 | R for Excel Users</title>
  <meta name="description" content="This is a workshop for RStudio::conf(2020) in San Francisco, California" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Graphs with ggplot2 | R for Excel Users" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a workshop for RStudio::conf(2020) in San Francisco, California" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Graphs with ggplot2 | R for Excel Users" />
  
  <meta name="twitter:description" content="This is a workshop for RStudio::conf(2020) in San Francisco, California" />
  

<meta name="author" content="Julie Lowndes &amp; Allison Horst" />


<meta name="date" content="2019-12-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="readxl.html"/>
<link rel="next" href="tidying.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Excel Users</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="overview.html"><a href="overview.html#why-learn-r-if-i-know-excel"><i class="fa fa-check"></i><b>2.1</b> Why learn R if I know Excel?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="overview.html"><a href="overview.html#what-to-expect"><i class="fa fa-check"></i><b>2.1.1</b> What to expect</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="overview.html"><a href="overview.html#friendly-mindset"><i class="fa fa-check"></i><b>2.2</b> Friendly mindset</a></li>
<li class="chapter" data-level="2.3" data-path="overview.html"><a href="overview.html#guiding-principles"><i class="fa fa-check"></i><b>2.3</b> Guiding principles</a></li>
<li class="chapter" data-level="2.4" data-path="overview.html"><a href="overview.html#resources"><i class="fa fa-check"></i><b>2.4</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>3</b> R &amp; RStudio, RMarkdown</a><ul>
<li class="chapter" data-level="3.1" data-path="rstudio.html"><a href="rstudio.html#summary"><i class="fa fa-check"></i><b>3.1</b> Summary</a></li>
<li class="chapter" data-level="3.2" data-path="rstudio.html"><a href="rstudio.html#objectives"><i class="fa fa-check"></i><b>3.2</b> Objectives</a></li>
<li class="chapter" data-level="3.3" data-path="rstudio.html"><a href="rstudio.html#resources-1"><i class="fa fa-check"></i><b>3.3</b> Resources</a></li>
<li class="chapter" data-level="3.4" data-path="rstudio.html"><a href="rstudio.html#why-learn-r-with-rstudio"><i class="fa fa-check"></i><b>3.4</b> Why learn R with RStudio</a></li>
<li class="chapter" data-level="3.5" data-path="rstudio.html"><a href="rstudio.html#rstudio-orientation"><i class="fa fa-check"></i><b>3.5</b> RStudio Orientation</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rstudio.html"><a href="rstudio.html#r-console"><i class="fa fa-check"></i><b>3.5.1</b> R Console</a></li>
<li class="chapter" data-level="3.5.2" data-path="rstudio.html"><a href="rstudio.html#viewing-data-in-r"><i class="fa fa-check"></i><b>3.5.2</b> Viewing data in R</a></li>
<li class="chapter" data-level="3.5.3" data-path="rstudio.html"><a href="rstudio.html#r-functions-help-pages"><i class="fa fa-check"></i><b>3.5.3</b> R functions, help pages</a></li>
<li class="chapter" data-level="3.5.4" data-path="rstudio.html"><a href="rstudio.html#packages"><i class="fa fa-check"></i><b>3.5.4</b> Packages</a></li>
<li class="chapter" data-level="3.5.5" data-path="rstudio.html"><a href="rstudio.html#assigning-objects-with--"><i class="fa fa-check"></i><b>3.5.5</b> Assigning objects with <code>&lt;-</code></a></li>
<li class="chapter" data-level="3.5.6" data-path="rstudio.html"><a href="rstudio.html#error-messages-are-your-friends"><i class="fa fa-check"></i><b>3.5.6</b> Error messages are your friends</a></li>
<li class="chapter" data-level="3.5.7" data-path="rstudio.html"><a href="rstudio.html#logical-operators-and-expressions"><i class="fa fa-check"></i><b>3.5.7</b> Logical operators and expressions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rstudio.html"><a href="rstudio.html#clearing-the-environment"><i class="fa fa-check"></i><b>3.6</b> Clearing the environment</a></li>
<li class="chapter" data-level="3.7" data-path="rstudio.html"><a href="rstudio.html#intro-to-rmarkdown"><i class="fa fa-check"></i><b>3.7</b> Intro to RMarkdown</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rstudio.html"><a href="rstudio.html#what-is-rmarkdown-1-minute-video"><i class="fa fa-check"></i><b>3.7.1</b> What is RMarkdown? (1-minute video)</a></li>
<li class="chapter" data-level="3.7.2" data-path="rstudio.html"><a href="rstudio.html#create-an-rmarkdown-file"><i class="fa fa-check"></i><b>3.7.2</b> Create an RMarkdown file</a></li>
<li class="chapter" data-level="3.7.3" data-path="rstudio.html"><a href="rstudio.html#knit-your-rmarkdown-file"><i class="fa fa-check"></i><b>3.7.3</b> Knit your RMarkdown file</a></li>
<li class="chapter" data-level="3.7.4" data-path="rstudio.html"><a href="rstudio.html#activity-5-mins"><i class="fa fa-check"></i><b>3.7.4</b> Activity (5 mins)</a></li>
<li class="chapter" data-level="3.7.5" data-path="rstudio.html"><a href="rstudio.html#r-code-chunks"><i class="fa fa-check"></i><b>3.7.5</b> R code chunks</a></li>
<li class="chapter" data-level="3.7.6" data-path="rstudio.html"><a href="rstudio.html#activity-3-min"><i class="fa fa-check"></i><b>3.7.6</b> Activity (3 min)</a></li>
<li class="chapter" data-level="3.7.7" data-path="rstudio.html"><a href="rstudio.html#markdown-sections"><i class="fa fa-check"></i><b>3.7.7</b> Markdown sections</a></li>
<li class="chapter" data-level="3.7.8" data-path="rstudio.html"><a href="rstudio.html#activity"><i class="fa fa-check"></i><b>3.7.8</b> Activity</a></li>
<li class="chapter" data-level="3.7.9" data-path="rstudio.html"><a href="rstudio.html#restart-r"><i class="fa fa-check"></i><b>3.7.9</b> Restart R</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="rstudio.html"><a href="rstudio.html#deep-thoughts"><i class="fa fa-check"></i><b>3.8</b> Deep thoughts</a></li>
<li class="chapter" data-level="3.9" data-path="rstudio.html"><a href="rstudio.html#efficiency-tips"><i class="fa fa-check"></i><b>3.9</b> Efficiency Tips</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>4</b> GitHub</a><ul>
<li class="chapter" data-level="4.1" data-path="github.html"><a href="github.html#summary-1"><i class="fa fa-check"></i><b>4.1</b> Summary</a></li>
<li class="chapter" data-level="4.2" data-path="github.html"><a href="github.html#objectives-1"><i class="fa fa-check"></i><b>4.2</b> Objectives</a></li>
<li class="chapter" data-level="4.3" data-path="github.html"><a href="github.html#resources-2"><i class="fa fa-check"></i><b>4.3</b> Resources</a></li>
<li class="chapter" data-level="4.4" data-path="github.html"><a href="github.html#why-should-r-users-use-github"><i class="fa fa-check"></i><b>4.4</b> Why should R users use Github?</a><ul>
<li class="chapter" data-level="4.4.1" data-path="github.html"><a href="github.html#what-are-git-and-github"><i class="fa fa-check"></i><b>4.4.1</b> What are Git and Github?</a></li>
<li class="chapter" data-level="4.4.2" data-path="github.html"><a href="github.html#some-github-terminology"><i class="fa fa-check"></i><b>4.4.2</b> Some Github terminology</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="github.html"><a href="github.html#setup-git-github"><i class="fa fa-check"></i><b>4.5</b> Setup Git &amp; GitHub</a><ul>
<li class="chapter" data-level="4.5.1" data-path="github.html"><a href="github.html#troubleshooting"><i class="fa fa-check"></i><b>4.5.1</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="github.html"><a href="github.html#create-a-repository-on-github.com"><i class="fa fa-check"></i><b>4.6</b> Create a repository on Github.com</a></li>
<li class="chapter" data-level="4.7" data-path="github.html"><a href="github.html#clone-your-repository-using-rstudio"><i class="fa fa-check"></i><b>4.7</b> Clone your repository using RStudio</a></li>
<li class="chapter" data-level="4.8" data-path="github.html"><a href="github.html#inspect-your-repository"><i class="fa fa-check"></i><b>4.8</b> Inspect your repository</a></li>
<li class="chapter" data-level="4.9" data-path="github.html"><a href="github.html#add-files-to-our-local-repo"><i class="fa fa-check"></i><b>4.9</b> Add files to our local repo</a><ul>
<li class="chapter" data-level="4.9.1" data-path="github.html"><a href="github.html#inspect-what-has-changed"><i class="fa fa-check"></i><b>4.9.1</b> Inspect what has changed</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="github.html"><a href="github.html#sync-from-rstudio-to-github"><i class="fa fa-check"></i><b>4.10</b> Sync from RStudio to GitHub</a><ul>
<li class="chapter" data-level="4.10.1" data-path="github.html"><a href="github.html#pull"><i class="fa fa-check"></i><b>4.10.1</b> Pull</a></li>
<li class="chapter" data-level="4.10.2" data-path="github.html"><a href="github.html#stage"><i class="fa fa-check"></i><b>4.10.2</b> Stage</a></li>
<li class="chapter" data-level="4.10.3" data-path="github.html"><a href="github.html#commit"><i class="fa fa-check"></i><b>4.10.3</b> Commit</a></li>
<li class="chapter" data-level="4.10.4" data-path="github.html"><a href="github.html#push"><i class="fa fa-check"></i><b>4.10.4</b> Push</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="github.html"><a href="github.html#explore-remote-github"><i class="fa fa-check"></i><b>4.11</b> Explore remote Github</a><ul>
<li class="chapter" data-level="4.11.1" data-path="github.html"><a href="github.html#activity-1"><i class="fa fa-check"></i><b>4.11.1</b> Activity</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="github.html"><a href="github.html#create-a-new-r-markdown-file"><i class="fa fa-check"></i><b>4.12</b> Create a new R Markdown file</a></li>
<li class="chapter" data-level="4.13" data-path="github.html"><a href="github.html#committing---how-often-tracking-changes-in-your-files"><i class="fa fa-check"></i><b>4.13</b> Committing - how often? Tracking changes in your files</a></li>
<li class="chapter" data-level="4.14" data-path="github.html"><a href="github.html#happy-git-with-r"><i class="fa fa-check"></i><b>4.14</b> Happy Git with R</a></li>
<li class="chapter" data-level="4.15" data-path="github.html"><a href="github.html#efficiency-tips-1"><i class="fa fa-check"></i><b>4.15</b> Efficiency Tips</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="readxl.html"><a href="readxl.html"><i class="fa fa-check"></i><b>5</b> <code>readxl</code></a><ul>
<li class="chapter" data-level="5.1" data-path="readxl.html"><a href="readxl.html#summary-2"><i class="fa fa-check"></i><b>5.1</b> Summary</a></li>
<li class="chapter" data-level="5.2" data-path="readxl.html"><a href="readxl.html#objectives-2"><i class="fa fa-check"></i><b>5.2</b> Objectives</a></li>
<li class="chapter" data-level="5.3" data-path="readxl.html"><a href="readxl.html#resources-3"><i class="fa fa-check"></i><b>5.3</b> Resources</a></li>
<li class="chapter" data-level="5.4" data-path="readxl.html"><a href="readxl.html#lesson"><i class="fa fa-check"></i><b>5.4</b> Lesson</a><ul>
<li class="chapter" data-level="5.4.1" data-path="readxl.html"><a href="readxl.html#lesson-prep-get-data-files-into-your-working-directory"><i class="fa fa-check"></i><b>5.4.1</b> Lesson prep: get data files into your working directory</a></li>
<li class="chapter" data-level="5.4.2" data-path="readxl.html"><a href="readxl.html#in-the-.rmd-you-just-created-attach-the-tidyverse-readxl-and-writexl-packages"><i class="fa fa-check"></i><b>5.4.2</b> In the .Rmd you just created, attach the <code>tidyverse</code>, <code>readxl</code> and <code>writexl</code> packages</a></li>
<li class="chapter" data-level="5.4.3" data-path="readxl.html"><a href="readxl.html#use-readrread_csv-to-read-in-data-from-a-csv-file"><i class="fa fa-check"></i><b>5.4.3</b> Use <code>readr::read_csv()</code> to read in data from a CSV file</a></li>
<li class="chapter" data-level="5.4.4" data-path="readxl.html"><a href="readxl.html#use-readxlread_excel-to-read-in-a-single-excel-worksheet"><i class="fa fa-check"></i><b>5.4.4</b> Use <code>readxl::read_excel()</code> to read in a single Excel worksheet</a></li>
<li class="chapter" data-level="5.4.5" data-path="readxl.html"><a href="readxl.html#use-readxlread_excel-to-read-in-only-part-of-an-excel-worksheet"><i class="fa fa-check"></i><b>5.4.5</b> Use <code>readxl::read_excel()</code> to read in only <em>part</em> of an Excel worksheet</a></li>
<li class="chapter" data-level="5.4.6" data-path="readxl.html"><a href="readxl.html#use-readxlread_excel-to-read-in-selected-worksheets-from-a-workbook"><i class="fa fa-check"></i><b>5.4.6</b> Use <code>readxl::read_excel()</code> to read in selected worksheets from a workbook</a></li>
<li class="chapter" data-level="5.4.7" data-path="readxl.html"><a href="readxl.html#read-in-and-combine-data-from-multiple-worksheets-into-a-data-frame-simultaneously-with-purrrmap_df"><i class="fa fa-check"></i><b>5.4.7</b> Read in and combine data from multiple worksheets into a data frame simultaneously with <code>purrr::map_df()</code></a></li>
<li class="chapter" data-level="5.4.8" data-path="readxl.html"><a href="readxl.html#save-data-frames-as-.csv-or-.xlsx-with-readrwrite_csv-or-writexlwrite_xlsx"><i class="fa fa-check"></i><b>5.4.8</b> Save data frames as .csv or .xlsx with <code>readr::write_csv()</code> or <code>writexl::write_xlsx()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="readxl.html"><a href="readxl.html#fun-facts-ideas"><i class="fa fa-check"></i><b>5.5</b> Fun facts ideas:</a></li>
<li class="chapter" data-level="5.6" data-path="readxl.html"><a href="readxl.html#interludes-deep-thoughtsopenscapes"><i class="fa fa-check"></i><b>5.6</b> Interludes (deep thoughts/openscapes)</a></li>
<li class="chapter" data-level="5.7" data-path="readxl.html"><a href="readxl.html#activity-import-some-invertebrates"><i class="fa fa-check"></i><b>5.7</b> Activity: Import some invertebrates!</a></li>
<li class="chapter" data-level="5.8" data-path="readxl.html"><a href="readxl.html#efficiency-tips-2"><i class="fa fa-check"></i><b>5.8</b> Efficiency Tips</a></li>
<li class="chapter" data-level="5.9" data-path="readxl.html"><a href="readxl.html#deep-thoughts-1"><i class="fa fa-check"></i><b>5.9</b> Deep thoughts</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>6</b> Graphs with ggplot2</a><ul>
<li class="chapter" data-level="6.1" data-path="ggplot2.html"><a href="ggplot2.html#summary-3"><i class="fa fa-check"></i><b>6.1</b> Summary</a></li>
<li class="chapter" data-level="6.2" data-path="ggplot2.html"><a href="ggplot2.html#objectives-3"><i class="fa fa-check"></i><b>6.2</b> Objectives</a></li>
<li class="chapter" data-level="6.3" data-path="ggplot2.html"><a href="ggplot2.html#resources-4"><i class="fa fa-check"></i><b>6.3</b> Resources</a></li>
<li class="chapter" data-level="6.4" data-path="ggplot2.html"><a href="ggplot2.html#lesson-1"><i class="fa fa-check"></i><b>6.4</b> Lesson</a><ul>
<li class="chapter" data-level="6.4.1" data-path="ggplot2.html"><a href="ggplot2.html#getting-started---create-a-new-.rmd-attach-packages-get-data"><i class="fa fa-check"></i><b>6.4.1</b> Getting started - Create a new .Rmd, attach packages &amp; get data</a></li>
<li class="chapter" data-level="6.4.2" data-path="ggplot2.html"><a href="ggplot2.html#our-first-ggplot-graph-visitors-to-channel-islands-np"><i class="fa fa-check"></i><b>6.4.2</b> Our first ggplot graph: Visitors to Channel Islands NP</a></li>
<li class="chapter" data-level="6.4.3" data-path="ggplot2.html"><a href="ggplot2.html#intro-to-customizing-ggplot-graphs"><i class="fa fa-check"></i><b>6.4.3</b> Intro to customizing <code>ggplot</code> graphs</a></li>
<li class="chapter" data-level="6.4.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-complete-themes"><i class="fa fa-check"></i><b>6.4.4</b> ggplot2 complete themes</a></li>
<li class="chapter" data-level="6.4.5" data-path="ggplot2.html"><a href="ggplot2.html#updating-axis-labels-and-titles"><i class="fa fa-check"></i><b>6.4.5</b> Updating axis labels and titles</a></li>
<li class="chapter" data-level="6.4.6" data-path="ggplot2.html"><a href="ggplot2.html#combining-compatible-geoms"><i class="fa fa-check"></i><b>6.4.6</b> Combining compatible geoms</a></li>
<li class="chapter" data-level="6.4.7" data-path="ggplot2.html"><a href="ggplot2.html#multi-series-ggplot-graphs"><i class="fa fa-check"></i><b>6.4.7</b> Multi-series ggplot graphs</a></li>
<li class="chapter" data-level="6.4.8" data-path="ggplot2.html"><a href="ggplot2.html#faceting-ggplot-graphs"><i class="fa fa-check"></i><b>6.4.8</b> Faceting ggplot graphs</a></li>
<li class="chapter" data-level="6.4.9" data-path="ggplot2.html"><a href="ggplot2.html#exporting-a-ggplot-graph-with-ggsave"><i class="fa fa-check"></i><b>6.4.9</b> Exporting a ggplot graph with <code>ggsave()</code></a></li>
<li class="chapter" data-level="6.4.10" data-path="ggplot2.html"><a href="ggplot2.html#one-final-graph-example-jitter-and-boxplots"><i class="fa fa-check"></i><b>6.4.10</b> One final graph example: jitter and boxplots</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="ggplot2.html"><a href="ggplot2.html#activity-1-1"><i class="fa fa-check"></i><b>6.5</b> Activity 1</a></li>
<li class="chapter" data-level="6.6" data-path="ggplot2.html"><a href="ggplot2.html#activity-2"><i class="fa fa-check"></i><b>6.6</b> Activity 2</a></li>
<li class="chapter" data-level="6.7" data-path="ggplot2.html"><a href="ggplot2.html#efficiency-tips-3"><i class="fa fa-check"></i><b>6.7</b> Efficiency Tips</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i><b>7</b> Tidying</a><ul>
<li class="chapter" data-level="7.1" data-path="tidying.html"><a href="tidying.html#summary-4"><i class="fa fa-check"></i><b>7.1</b> Summary</a></li>
<li class="chapter" data-level="7.2" data-path="tidying.html"><a href="tidying.html#objectives-4"><i class="fa fa-check"></i><b>7.2</b> Objectives</a></li>
<li class="chapter" data-level="7.3" data-path="tidying.html"><a href="tidying.html#resources-5"><i class="fa fa-check"></i><b>7.3</b> Resources</a></li>
<li class="chapter" data-level="7.4" data-path="tidying.html"><a href="tidying.html#lesson-2"><i class="fa fa-check"></i><b>7.4</b> Lesson</a><ul>
<li class="chapter" data-level="7.4.1" data-path="tidying.html"><a href="tidying.html#lesson-prep"><i class="fa fa-check"></i><b>7.4.1</b> Lesson Prep</a></li>
<li class="chapter" data-level="7.4.2" data-path="tidying.html"><a href="tidying.html#reshaping-with-tidyrpivot_longer-and-tidyrpivot_wider"><i class="fa fa-check"></i><b>7.4.2</b> Reshaping with <code>tidyr::pivot_longer()</code> and <code>tidyr::pivot_wider()</code></a></li>
<li class="chapter" data-level="7.4.3" data-path="tidying.html"><a href="tidying.html#combine-or-separate-information-in-columns-with-tidyrunite-and-tidyrseparate"><i class="fa fa-check"></i><b>7.4.3</b> Combine or separate information in columns with <code>tidyr::unite()</code> and <code>tidyr::separate()</code></a></li>
<li class="chapter" data-level="7.4.4" data-path="tidying.html"><a href="tidying.html#convert-between-explicit-and-implicit-missings-nas"><i class="fa fa-check"></i><b>7.4.4</b> Convert between explicit and implicit missings (<code>NA</code>s)</a></li>
<li class="chapter" data-level="7.4.5" data-path="tidying.html"><a href="tidying.html#activities"><i class="fa fa-check"></i><b>7.4.5</b> Activities</a></li>
<li class="chapter" data-level="7.4.6" data-path="tidying.html"><a href="tidying.html#fun-facts-insights"><i class="fa fa-check"></i><b>7.4.6</b> Fun facts / insights</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vlookup.html"><a href="vlookup.html"><i class="fa fa-check"></i><b>8</b> Dplyr and vlookups</a><ul>
<li class="chapter" data-level="8.1" data-path="vlookup.html"><a href="vlookup.html#summary-5"><i class="fa fa-check"></i><b>8.1</b> Summary</a></li>
<li class="chapter" data-level="8.2" data-path="vlookup.html"><a href="vlookup.html#objectives-5"><i class="fa fa-check"></i><b>8.2</b> Objectives</a></li>
<li class="chapter" data-level="8.3" data-path="vlookup.html"><a href="vlookup.html#resources-6"><i class="fa fa-check"></i><b>8.3</b> Resources</a></li>
<li class="chapter" data-level="8.4" data-path="vlookup.html"><a href="vlookup.html#lessons"><i class="fa fa-check"></i><b>8.4</b> Lessons</a><ul>
<li class="chapter" data-level="8.4.1" data-path="vlookup.html"><a href="vlookup.html#dplyrfilter-to-conditionally-subset-by-rows"><i class="fa fa-check"></i><b>8.4.1</b> <code>dplyr::filter()</code> to conditionally subset by rows</a></li>
<li class="chapter" data-level="8.4.2" data-path="vlookup.html"><a href="vlookup.html#merging-data-frames-with-dplyr_join"><i class="fa fa-check"></i><b>8.4.2</b> Merging data frames with <code>dplyr::*_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="vlookup.html"><a href="vlookup.html#fun-kind-of-scary-facts"><i class="fa fa-check"></i><b>8.5</b> Fun / kind of scary facts</a></li>
<li class="chapter" data-level="8.6" data-path="vlookup.html"><a href="vlookup.html#interludes-deep-thoughtsopenscapes-1"><i class="fa fa-check"></i><b>8.6</b> Interludes (deep thoughts/openscapes)</a></li>
<li class="chapter" data-level="8.7" data-path="vlookup.html"><a href="vlookup.html#efficiency-tips-4"><i class="fa fa-check"></i><b>8.7</b> Efficiency Tips</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="synthesis.html"><a href="synthesis.html"><i class="fa fa-check"></i><b>9</b> Synthesis</a><ul>
<li class="chapter" data-level="9.1" data-path="synthesis.html"><a href="synthesis.html#summary-6"><i class="fa fa-check"></i><b>9.1</b> Summary</a></li>
<li class="chapter" data-level="9.2" data-path="synthesis.html"><a href="synthesis.html#objectives-6"><i class="fa fa-check"></i><b>9.2</b> Objectives</a></li>
<li class="chapter" data-level="9.3" data-path="synthesis.html"><a href="synthesis.html#resources-7"><i class="fa fa-check"></i><b>9.3</b> Resources</a></li>
<li class="chapter" data-level="9.4" data-path="synthesis.html"><a href="synthesis.html#lesson-3"><i class="fa fa-check"></i><b>9.4</b> Lesson</a><ul>
<li class="chapter" data-level="9.4.1" data-path="synthesis.html"><a href="synthesis.html#set-up"><i class="fa fa-check"></i><b>9.4.1</b> Set-up:</a></li>
<li class="chapter" data-level="9.4.2" data-path="synthesis.html"><a href="synthesis.html#attach-packages-and-read-in-the-data"><i class="fa fa-check"></i><b>9.4.2</b> Attach packages and read in the data</a></li>
<li class="chapter" data-level="9.4.3" data-path="synthesis.html"><a href="synthesis.html#data-wrangling"><i class="fa fa-check"></i><b>9.4.3</b> Data wrangling</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="synthesis.html"><a href="synthesis.html#fun-facts-quirky-things---making-a-note-of-these-wherever-possible-for-interest-little-did-you-know-sections"><i class="fa fa-check"></i><b>9.5</b> Fun facts (quirky things) - making a note of these wherever possible for interest (little “Did you know?” sections)</a></li>
<li class="chapter" data-level="9.6" data-path="synthesis.html"><a href="synthesis.html#interludes-deep-thoughtsopenscapes-2"><i class="fa fa-check"></i><b>9.6</b> Interludes (deep thoughts/openscapes)</a></li>
<li class="chapter" data-level="9.7" data-path="synthesis.html"><a href="synthesis.html#efficiency-tips-5"><i class="fa fa-check"></i><b>9.7</b> Efficiency Tips</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Excel Users</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Graphs with ggplot2</h1>
<div id="summary-3" class="section level2">
<h2><span class="header-section-number">6.1</span> Summary</h2>
<p>Now that we know how to <em>get</em> some data, the next thing we’ll probably want to do is <em>look</em> at it. In Excel, graphs are made by manually selecting options - which, as we’ve discussed previously, may not be the best option for reproducibility. Also, if we haven’t built a graph with reproducible code, then we might not be able to easily recreate a graph <em>or</em> use that code again to make the same style graph with different data.</p>
<p>Using <code>ggplot2</code>, the graphics package within the <code>tidyverse</code>, we’ll write reproducible code to manually and thoughtfully build our graphs.</p>
<blockquote>
<p>“ggplot2 implements the grammar of graphics, a coherent system for describing and building graphs. With ggplot2, you can do more faster by learning one system and applying it in many places.” - <a href="http://r4ds.had.co.nz/data-visualisation.html">R4DS</a></p>
</blockquote>
<p>So yeah…that <code>gg</code> is from “grammar of graphics” - original source</p>
<p>We’ll use the <code>ggplot2</code> package, but the function we use to initialize a graph will be <code>ggplot</code>, which works best for data in tidy format (i.e., a column for every variable, and a row for every observation). Graphics with <code>ggplot</code> are built step-by-step, adding new elements as layers with a plus sign (<code>+</code>) between layers (note: this is different from the pipe operator, <code>%&gt;%</code>. Adding layers in this fashion allows for extensive flexibility and customization of plots.</p>
<p><br>
<img src="img/rstudio-cheatsheet-ggplot.png" /></p>
</div>
<div id="objectives-3" class="section level2">
<h2><span class="header-section-number">6.2</span> Objectives</h2>
<ul>
<li>Build several common types of graphs (scatterplot, column, line) in ggplot2</li>
<li>Customize gg-graph aesthetics (color, style, themes, etc.)</li>
<li>Update axis labels and titles</li>
<li>Combine compatible graph types (geoms)</li>
<li>Build multiseries graphs</li>
<li>Split up data into faceted graphs</li>
<li>Exporting figures with <code>ggsave()</code></li>
</ul>
</div>
<div id="resources-4" class="section level2">
<h2><span class="header-section-number">6.3</span> Resources</h2>
<ul>
<li><a href="Chapter%203%20-%20Data%20Visualization%20in%20R%20for%20Data%20Science%20by%20Grolemund%20and%20Wickham">https://r4ds.had.co.nz/data-visualisation.html</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">ggplot2-cheatsheet-2.1.pdf</a><br />
</li>
<li><a href="http://www.cookbook-r.com/Graphs/#graphs-with-ggplot2">Graphs with ggplot2 - Cookbook for R</a><br />
</li>
<li><a href="http://varianceexplained.org/r/why-I-use-ggplot2/">“Why I use ggplot2” - David Robinson Blog Post</a></li>
</ul>
</div>
<div id="lesson-1" class="section level2">
<h2><span class="header-section-number">6.4</span> Lesson</h2>
<div id="getting-started---create-a-new-.rmd-attach-packages-get-data" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Getting started - Create a new .Rmd, attach packages &amp; get data</h3>
<p>Within your existing version-controlled R project, create a new R Markdown document with title “Session 4 - Data visualization with ggplot2.” Remove everything below the first code chunk. Knit and save the .Rmd file within your project working directory as “session_4_ggplot2”.</p>
<p>The <code>ggplot2</code> package is part of the <code>tidyverse</code>, so we don’t need to attach it separately. Attach the <code>tidyverse</code> and <code>readxl</code> packages in the top-most code chunk of your .Rmd.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">library</span>(readxl)</a></code></pre></div>
<p>In this session, we’ll use data for parks visitation from two files:</p>
<ul>
<li>A comma-separated-value (CSV) file containing visitation data for all National Parks in California (ca_np.csv)</li>
<li>A single Excel worksheet containing only visitation for Channel Islands National Park</li>
</ul>
<p><strong>A bit about Channel Islands National Park</strong>: TODO</p>
<p>Add a new code chunk to read in the data from the <strong>data</strong> subfolder within your working directory.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">ca_np &lt;-<span class="st"> </span><span class="kw">read_csv</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ca_np.csv&quot;</span>))</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">ci_np &lt;-<span class="st"> </span><span class="kw">read_xlsx</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ci_np.xlsx&quot;</span>))</a></code></pre></div>
<p>Let’s take a quick look at the data to see what it contains. For example:</p>
<ul>
<li><code>View()</code>: to look at the object in spreadsheet format</li>
<li><code>names()</code>: to see the variable (column) names</li>
<li><code>summary()</code>: see a quick summary of each variable</li>
</ul>
</div>
<div id="our-first-ggplot-graph-visitors-to-channel-islands-np" class="section level3">
<h3><span class="header-section-number">6.4.2</span> Our first ggplot graph: Visitors to Channel Islands NP</h3>
<p>To create a bare-bones ggplot graph, we need to tell R three basic things:</p>
<ol style="list-style-type: decimal">
<li>We’re using <code>ggplot</code></li>
<li>Data we’re using &amp; variables we’re plotting (i.e., what is x and/or y?)</li>
<li>What type of graph we’re making (the type of <em>geom</em>)</li>
</ol>
<p>Generally, that structure will look like this:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df_name, <span class="kw">aes</span>(<span class="dt">x =</span> x_var_name, <span class="dt">y =</span> y_var_name)) <span class="op">+</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_type</span>()</a></code></pre></div>
<p>Breaking that down:</p>
<ul>
<li>First, tell R you’re using <code>ggplot()</code></li>
<li>Then, tell it the object name where variables exist (<code>data = df_name</code>)</li>
<li>Next, tell it the aesthetics <code>aes()</code> to specify which variables you want to plot</li>
<li>Then add a layer for the type of geom (graph type) with <code>geom_*()</code> - for example, <code>geom_point()</code> is a scatterplot, <code>geom_line()</code> is a line graph, <code>geom_col()</code> is a column graph, etc.</li>
</ul>
<p>Let’s do that to create a line graph of visitors to Channel Islands National Park:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>Or, we could change that to a scatterplot just by updating the <code>geom_*</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>We could even do that for a column graph:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_col</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<p>Or an area plot…</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_area</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>We can see that updating to different <code>geom_*</code> types is quick, so long as the types of graphs we’re switching between are compatible.</p>
<p>The data are there, now let’s learn some customization.</p>
</div>
<div id="intro-to-customizing-ggplot-graphs" class="section level3">
<h3><span class="header-section-number">6.4.3</span> Intro to customizing <code>ggplot</code> graphs</h3>
<p>First, we’ll customize some aesthetics (e.g. colors, styles, axis labels, etc.) of our graphs based on non-variable values.</p>
<blockquote>
<p>We can change the aesthetics of elements in a ggplot graph by adding arguments within the layer where that element is created.</p>
</blockquote>
<p>Some common arguments we’ll use first are:</p>
<ul>
<li><code>color =</code> or <code>colour =</code>: update point or line colors</li>
<li><code>fill =</code>: update fill color for objects with areas</li>
<li><code>linetype =</code>: update the line type (dashed, long dash, etc.)</li>
<li><code>pch =</code>: update the point style</li>
<li><code>size =</code>: update the element size (e.g. of points or line thickness)</li>
<li><code>alpha =</code>: update element opacity (1 = opaque, 0 = transparent)</li>
</ul>
<p>Building on our first line graph, let’s update the line color to “purple” and make the line type “dashed”:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(</a>
<a class="sourceLine" id="cb60-3" data-line-number="3">    <span class="dt">color =</span> <span class="st">&quot;purple&quot;</span>,</a>
<a class="sourceLine" id="cb60-4" data-line-number="4">    <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span></a>
<a class="sourceLine" id="cb60-5" data-line-number="5">  )</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>How do we know which color names ggplot will recognize? If you google “R colors ggplot2” you’ll find a lot of good resources. Here’s one: <a href="http://sape.inf.usi.ch/quick-reference/ggplot2/colour">SAPE ggplot2 colors quick reference guide</a></p>
<p>Now let’s update the point, style and size of points on our previous scatterplot graph using <code>color =</code>, <code>size =</code>, and <code>pch =</code> (see <code>?pch</code> for the different point styles, which can be further customized).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;purple&quot;</span>,</a>
<a class="sourceLine" id="cb61-3" data-line-number="3">             <span class="dt">pch =</span> <span class="dv">17</span>,</a>
<a class="sourceLine" id="cb61-4" data-line-number="4">             <span class="dt">size =</span> <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb61-5" data-line-number="5">             <span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>In the examples above, we have customized aesthetics based on constants that we input as arguments (e.g., the color / style / size isn’t changing based on a variable characteristic or value).
Sometimes, however, we <strong>do</strong> want the aesthetics of a graph to depend on a variable.</p>
<blockquote>
<p>When we want to customize a graph element based on a variable’s characteristic or value, add the argument within <code>aes()</code> in the appropriate <code>geom_*()</code> layer</p>
</blockquote>
<p>In short, if updating aesthetics based on a variable, make sure to put that argument inside of <code>aes()</code>.</p>
<p><strong>Example:</strong> Create a ggplot scatterplot graph where the <strong>size</strong> and <strong>color</strong> of the points change based on the <strong>number of visitors</strong>, and make all points the same level of opacity (<code>alpha = 0.5</code>). Notice the <code>aes()</code> around the <code>size =</code> and <code>color =</code> arguments.</p>
<p>Also: this is overmapped and unnecessary. Avoid excessive / overcomplicated aesthetic mapping in data visualization.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb62-3" data-line-number="3">    <span class="kw">aes</span>(<span class="dt">size =</span> visitors,</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">        <span class="dt">color =</span> visitors),</a>
<a class="sourceLine" id="cb62-5" data-line-number="5">    <span class="dt">alpha =</span> <span class="fl">0.5</span></a>
<a class="sourceLine" id="cb62-6" data-line-number="6">  )</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<p>In the example above, notice that the two arguments that <strong>do</strong> depend on variables are within <code>aes()</code>, but since <code>alpha = 0.5</code> doesn’t depend on a variable then it is <em>outside the <code>aes()</code> but still within the <code>geom_point()</code> layer</em>.</p>
</div>
<div id="ggplot2-complete-themes" class="section level3">
<h3><span class="header-section-number">6.4.4</span> ggplot2 complete themes</h3>
<p>While every element of a ggplot graph is manually customizable, there are also built-in themes (<code>theme_*()</code>) that you can add to your ggplot code to make some major headway before making smaller tweaks manually.</p>
<p>Here are a few to try today (but also notice all the options that appear as we start typing <code>theme_</code> into our ggplot graph code!):</p>
<ul>
<li><code>theme_light()</code></li>
<li><code>theme_minimal()</code></li>
<li><code>theme_bw()</code></li>
</ul>
<p>Within those themes, we can also add graph-wide options for fonts and sizes. For example:</p>
<ul>
<li><code>base_size =</code>: update base font size</li>
<li><code>base_family =</code>: update based font family</li>
<li><code>base_line_size</code>: update base line size</li>
</ul>
<p>Here, let’s update our previous graph with <code>theme_minimal()</code>:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">    <span class="kw">aes</span>(<span class="dt">size =</span> visitors,</a>
<a class="sourceLine" id="cb63-4" data-line-number="4">        <span class="dt">color =</span> visitors),</a>
<a class="sourceLine" id="cb63-5" data-line-number="5">    <span class="dt">alpha =</span> <span class="fl">0.5</span></a>
<a class="sourceLine" id="cb63-6" data-line-number="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-7" data-line-number="7"><span class="st">  </span><span class="kw">theme_minimal</span>(</a>
<a class="sourceLine" id="cb63-8" data-line-number="8">  )</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
</div>
<div id="updating-axis-labels-and-titles" class="section level3">
<h3><span class="header-section-number">6.4.5</span> Updating axis labels and titles</h3>
<p>Use <code>labs()</code> to update axis labels, and add a title and/or subtitle to your ggplot graph.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">linetype =</span> <span class="st">&quot;dotted&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb64-4" data-line-number="4"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb64-5" data-line-number="5">    <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>,</a>
<a class="sourceLine" id="cb64-6" data-line-number="6">    <span class="dt">y =</span> <span class="st">&quot;Annual park visitors&quot;</span>,</a>
<a class="sourceLine" id="cb64-7" data-line-number="7">    <span class="dt">title =</span> <span class="st">&quot;Channel Islands NP Visitation&quot;</span>,</a>
<a class="sourceLine" id="cb64-8" data-line-number="8">    <span class="dt">subtitle =</span> <span class="st">&quot;(1963 - 2016)&quot;</span></a>
<a class="sourceLine" id="cb64-9" data-line-number="9">  )</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p><strong>Note</strong>: If you want to update the formatting of axis values (for example, to convert to comma format instead of scientific format above), you can use the <code>scales</code> package options (see more from the <a href="http://www.cookbook-r.com/Graphs/Axes_(ggplot2)/">R Cookbook</a>).</p>
</div>
<div id="combining-compatible-geoms" class="section level3">
<h3><span class="header-section-number">6.4.6</span> Combining compatible geoms</h3>
<p>As long as the geoms are compatible, we can layer them on top of one another to further customize a graph.</p>
<p>For example, adding points to a line graph:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="st">&quot;purple&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb65-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;magenta&quot;</span>,</a>
<a class="sourceLine" id="cb65-4" data-line-number="4">             <span class="kw">aes</span>(<span class="dt">size =</span> year))</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<p>Or, combine a column and line graph (not sure why you’d want to do this, but you can):</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ci_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">fill =</span> <span class="st">&quot;orange&quot;</span>,</a>
<a class="sourceLine" id="cb66-3" data-line-number="3">           <span class="dt">color =</span> <span class="st">&quot;purple&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb66-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-68-1.png" width="672" /></p>
</div>
<div id="multi-series-ggplot-graphs" class="section level3">
<h3><span class="header-section-number">6.4.7</span> Multi-series ggplot graphs</h3>
<p>In the examples above, we only had a single series - visitation at Channel Islands National Park. Often we’ll want to visualize multiple series. For example, from the <code>ca_np</code> object we have stored, we might want to plot visitation for <em>all</em> California National Parks.</p>
<p>To do that, we need to add an aesthetic that lets <code>ggplot</code> know how things are going to be grouped. A demonstration of why that’s important - what happens if we <em>don’t</em> let ggplot know how to group things?</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ca_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p>Well that’s definitely a mess, and it’s because ggplot has no idea that these <strong>should be different series based on the different parks that appear in the ‘park_name’ column</strong>.</p>
<p>We can make sure R does know by updating an aesthetic based on <em>park_name</em>:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ca_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors, <span class="dt">color =</span> park_name)) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<p><strong>Note</strong>: You could also add that aesthetic (<code>color = park_name</code>) in the <code>geom_line()</code> layer, instead of in the topmost <code>ggplot()</code> layer.</p>
</div>
<div id="faceting-ggplot-graphs" class="section level3">
<h3><span class="header-section-number">6.4.8</span> Faceting ggplot graphs</h3>
<p>When we facet graphs, we split them up into multiple plotting panels, where each panel contains a subset of the data. In our case, we’ll split the graph above into different panels, each containing visitation data for a single park.</p>
<p>Also notice that any general theme changes made will be applied to <em>all</em> of the graphs.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ca_np, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> visitors, <span class="dt">color =</span> park_name)) <span class="op">+</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_light</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb69-4" data-line-number="4"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;annual visitors&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb69-5" data-line-number="5"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>park_name)</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
</div>
<div id="exporting-a-ggplot-graph-with-ggsave" class="section level3">
<h3><span class="header-section-number">6.4.9</span> Exporting a ggplot graph with <code>ggsave()</code></h3>
<p>If we want our graph to appear in a knitted html, then we don’t need to do anything else. But often we’ll need a saved image file, of specific size and resolution, to share or for publication.</p>
<p><code>ggsave()</code> will export the <em>most recently run</em> ggplot graph by default (<code>plot = last_plot()</code>), unless you give it the name of a different saved ggplot object. Some common arguments for <code>ggsave()</code>:</p>
<ul>
<li><code>width =</code>: set exported image width (default inches)</li>
<li><code>height =</code>: set exported image height (default height)</li>
<li><code>dpi =</code>: set dpi (dots per inch)</li>
</ul>
<p>So to export the faceted graph above at 180 dpi, width a width of 8&quot; and a height of 7&quot;, we can use:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;np_graph.jpg&quot;</span>, <span class="dt">dpi =</span> <span class="dv">180</span>, <span class="dt">width =</span> <span class="dv">8</span>, <span class="dt">height =</span> <span class="dv">7</span>)</a></code></pre></div>
<p>Notice that a .jpg image of that name and size is now stored in your project working directory. You can change the type of exported image, too (e.g. pdf, tiff, eps, png, mmp, svg).</p>
</div>
<div id="one-final-graph-example-jitter-and-boxplots" class="section level3">
<h3><span class="header-section-number">6.4.10</span> One final graph example: jitter and boxplots</h3>
<p>For the record: this is not a good option for showing the visitation data because values are not independent observations of a random variable. But, for the purposes of showing a graph, we’ll use visitation as our continuous measured variable in a jitter + boxplot anyway.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> ca_np, <span class="kw">aes</span>(<span class="dt">x =</span> park_name, <span class="dt">y =</span> visitors)) <span class="op">+</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>,</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">              <span class="dt">color =</span> <span class="st">&quot;gray60&quot;</span>,</a>
<a class="sourceLine" id="cb71-4" data-line-number="4">              <span class="dt">width =</span> <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb71-5" data-line-number="5">              <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb71-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">fill =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb71-7" data-line-number="7">               <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb71-8" data-line-number="8">               <span class="dt">outlier.color =</span> <span class="ot">NA</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb71-9" data-line-number="9"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb71-10" data-line-number="10"><span class="st">  </span><span class="kw">theme_minimal</span>()</a></code></pre></div>
<p><img src="R-for-Excel-Users_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
</div>
</div>
<div id="activity-1-1" class="section level2">
<h2><span class="header-section-number">6.5</span> Activity 1</h2>
</div>
<div id="activity-2" class="section level2">
<h2><span class="header-section-number">6.6</span> Activity 2</h2>
</div>
<div id="efficiency-tips-3" class="section level2">
<h2><span class="header-section-number">6.7</span> Efficiency Tips</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="readxl.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidying.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R for Excel Users.pdf", "R for Excel Users.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
